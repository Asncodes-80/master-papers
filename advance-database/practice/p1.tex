\documentclass[a4paper]{article}
\usepackage{listings}
\usepackage{hyperref}
\usepackage{plantuml}
\usetikzlibrary{arrows, shapes, automata, petri, positioning, calc}
\usepackage{graphicx}
\usepackage{ragged2e}
\usepackage{color}
\usepackage{xepersian}
\usepackage{subfiles}
\settextfont[Scale=1]{XB Roya}
\renewcommand{\baselinestretch}{1.5}

\begin{document}
\centerline{پایگاه داده پیشرفته تمرین اول}
\centerline{دکتر شجاعی مهر}
\centerline{علیرضا سلطانی نشان}
\centerline{\today}

سوال: 

طبق تعریف کتاب سیلبرشاتز از بروزرسانی گم شده یا \lr{last update} ناهنجاری زمانی
رخ می‌دهد که $t_{j}$ داده‌ای را بخواند و سپس تراکنش $t_{k}$ همان داده را بنویسد.
(البته ممکن است براساس خواندن‌های قبلی خود نوشتن را انجام دهد) و سپس $t_{j}$
همان داده‌ را بنویسد. در این صورت بروزرسانی انجام شده توسط $t_{k}$ از بین رفته
است.

با ارائه یک مثال از یک زمان‌بندی به سوالات زیر پاسخ دهید:

\begin{enumerate}
    \item آیا در سطح جداسازی \lr{Read committed} این ناهنجاری رخ می‌دهد یا خیر؟
    \item آیا سطح جداسازی \lr{Repeadable Read} این ناهنجاری رخ می‌دهد یا خیر؟
\end{enumerate}

پاسخ سوال ۱:


\begin{LTR}
    \begin{table}[h]
        \centering
        \begin{RTL}
            \caption{تراکنش‌های $t_{i}$ و $t_{j}$ در دو روند جدا}
        \end{RTL}
        \begin{tabular}{|c|c|}
            \hline
            $t_{i}$ & $t_{j}$ \\ \hline
            R(Q) & \\ \hline
             & W(Q) \\ \hline
             & C \\ \hline
            R(Q) &  \\ \hline
        \end{tabular}
    \end{table}
\end{LTR}

بله ناهنجاری رخ می‌دهد چرا که مقدار قبلی که در فرایند $t_{i}$ با مقدار جدید
$t_{j}$ با یکدیگر مشابه نیستند.

از عنوان می‌توان درک کرد که خواندن بعد از ثبت مقدار جدید اتفاق افتاده. اگر به ۳
قاعده مهم پی در پی پذیری در دید اشاره کنیم، زمانی پی در پی پذیری در دید است که
هر دو تراکنش مقداری مشابه را بنویسند که آخرین قانون یعنی نوشتن‌های پایانی را
اشاره دارد. ولی در این این مثال خواندن بعد از نوشتن رخ داده است. تراکنش اول هیچ
نوشتنی را نداشته و تنها آخرین نوشتن را در حال خواندن است.


\newpage

پاسخ سوال ۲:

سیستم DBM بررسی می‌کند، اگر $t_{i}$ دائما در حال خواندن یک داده ثابت باشد (برای
مثال در مرحله اولیه، مقدار اولیه ۵ است) این فرایند در تراکنش \lr{Repeadable
read} دائما مقدار ۵ را گزارش می‌کند. پس سیستم می‌تواند تصمیم بگیرد که این
تراکنش‌ها در $t_{j}$ از S با $t_{k}$ در S' با یکدیگر برابر و مشابه‌اند.


\begin{LTR}
    \begin{table}[h]
        \centering
        \begin{RTL}
            \caption{تراکنش‌های $t_{j}$ و $t_{k}$ در دو روند جدا}
        \end{RTL}
        \begin{tabular}{|c|c|}
            \hline
            $t_{j}$ & $t_{k}$ \\ \hline
            R(Q) & R(Q) \\ \hline
            & \\ \hline
            R(Q) & R(Q) \\ \hline
            & \\ \hline
            & \\ \hline
            R(Q) & W(Q) \\ \hline
            R(Q) & R(Q) \\ \hline
            R(Q) & R(Q) \\ \hline
        \end{tabular}
    \end{table}
\end{LTR}

مقدار اولیه خوانده شده ۵ بود.اما بعد از مرحله ۶ که تراکنش $t_{k}$ مقدار ۲۳ را
ثبت کرد، دیگر سیستم مقدار ۲۳ را می‌خواند که در حقیقت عمل آخرین بروزرسانی هم در
این جا می‌توان شاهد بود.


اما به نظر بنده این نظر نمی‌تواند به اینجا ختم شود چرا که تراکنش‌های بعد از
مرحله ۶ در دو بار در حال خواندن مقدار ۲۳ هستند که این از چهارچوب نظریه پی در پی
پذیری در دید صحیح می‌باشد، به خاطر آن که در مرحله آخر دقیقا مقدار دو تراکنش در
دو فرایند جدا یکسان بوده است.

پس از این سوال می‌توان نتیجه گرفت که همه چیز به دید سیستم بستگی دارد:

\begin{itemize}
    \item اگر مقدار جدیدی هیچ وقت در هیچ تراکنشی نوشته نشود دائما در حال خواندن
    مقدار اولیه هستیم که این با نظریه پی در پی پذیری در دید مطابقت دارد.
    \item اما اگر سیستم مانند تراکنش بالا باشد باید در عمل دید که ناهنجاری
    سیستمی در چه فرایندی نمایان می‌شود. از نظر من این سیستم ناهنجاری در مرحله ۶
    دارد و از مرحله ۶ به بعد با اینکه مقدار یکسانی را می‌خواد (۲۳) اما یکبار
    قانون دید را شکسته است.
\end{itemize}
\end{document}